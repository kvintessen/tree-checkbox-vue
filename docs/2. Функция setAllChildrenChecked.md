### Как `setAllChildrenChecked` вызывается:

1. **Внутри функции `toggle`**: Функция `setAllChildrenChecked` вызывается непосредственно из функции `toggle`, которая отвечает за переключение состояния чекбокса родительского узла. То есть, когда пользователь кликает по чекбоксу родительского узла, функция `toggle` не только меняет состояние родителя, но и вызывает `setAllChildrenChecked`, чтобы синхронизировать состояние всех дочерних узлов.
    
2. **Логика внутри `toggle`**:
    

Пример вызова `setAllChildrenChecked`:

```TS
const toggle = () => {
  if (props.node.checked === false || props.node.checked === null) {
    props.node.checked = true;
    setAllChildrenChecked(props.node, true); // Рекурсивно выставляем флажки для всех дочерних узлов
  } else {
    props.node.checked = false;
    setAllChildrenChecked(props.node, false); // Рекурсивно снимаем флажки у всех дочерних узлов
  }
  emit('update');
};
```

### Как работает вызов:

1. **Когда пользователь кликает по чекбоксу родителя**, срабатывает событие `change`, и функция `toggle` вызывается через привязку `@change="toggle"`.
2. Внутри `toggle` проверяется состояние родителя:
    - Если родительский узел не отмечен (или в промежуточном состоянии), он отмечается, и рекурсивно все его дочерние узлы также становятся отмеченными.
    - Если родительский узел уже отмечен, то он снимается, и все его дочерние узлы также снимаются.
3. **В этот момент и вызывается `setAllChildrenChecked`**, которая рекурсивно обходит всех дочерних узлов и выставляет им нужное состояние (отмечено или не отмечено).

### Рекурсивный вызов `setAllChildrenChecked`:

Функция `setAllChildrenChecked` обходит все дочерние узлы и меняет их состояние на то, которое передается в параметре `checked`. Если у дочернего узла есть свои дочерние узлы, она вызывает сама себя для обработки следующих уровней.

Пример рекурсивной функции:

```TS
const setAllChildrenChecked = (node: TreeNode, checked: boolean) => {
  if (node.children) {
    node.children.forEach((child) => {
      child.checked = checked; // Меняем состояние дочернего узла
      setAllChildrenChecked(child, checked); // Рекурсивно обрабатываем все дочерние узлы
    });
  }
};
```

### Важные моменты:

- **Рекурсия**: Когда вызывается `setAllChildrenChecked`, она проходит по всем дочерним узлам. Если у узла есть свои дочерние узлы, она вызывает сама себя, чтобы обработать все уровни дерева.
- **Параметр `checked`**: Функция получает параметр `checked`, который определяет, должно ли состояние быть установлено как отмечено (`true`) или снято (`false`).

### Логика вызова `setAllChildrenChecked`:

1. **Пользователь кликает на родительский чекбокс**.
2. **Vue вызывает `toggle`** через привязку события `@change="toggle"`.
3. **`toggle` обновляет состояние родителя и вызывает `setAllChildrenChecked`**, чтобы обновить состояние всех дочерних узлов.
4. **`setAllChildrenChecked` рекурсивно проходит по дочерним узлам** и выставляет для них нужное состояние.

### Заключение:

Vue не вызывает функцию `setAllChildrenChecked` автоматически. Эта функция вызывается вручную внутри твоего кода, в функции `toggle`, которая срабатывает при изменении состояния чекбокса. Она рекурсивно обходит все дочерние узлы и изменяет их состояние в зависимости от того, было ли выбрано или снято состояние у родителя.